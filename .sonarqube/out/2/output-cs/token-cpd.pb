¦
[C:\Users\Pim\Desktop\Semester 6\Individual project\Code\vybes-backend\ApiGateway\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
ConfigureServices 
( 
builder 
. 
Services "
)" #
;# $
var

 
app

 
=

 	
builder


 
.

 
Build

 
(

 
)

 
;

 
app 
. 
UseCors 
( 
$str 
) 
; 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
UseAuthentication 
( 
) 
; 
app 
. 
UseAuthorization 
( 
) 
; 
await 
app 	
.	 

	UseOcelot
 
( 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
app 
. 
Run 
( 
) 	
;	 

void 
ConfigureServices 
( 
IServiceCollection )
services* 2
)2 3
{ 
builder 
. 
WebHost 
. %
ConfigureAppConfiguration -
(- .
(. /
_/ 0
,0 1
config2 8
)8 9
=>: <
{ 
config 
. 
AddJsonFile 
( 
$" 
$str $
{$ %
builder% ,
., -
Environment- 8
.8 9
EnvironmentName9 H
}H I
$strI N
"N O
)O P
;P Q
} 
) 
; 
string 

domain 
= 
$" 
$str 
{ 
builder &
.& '
Configuration' 4
[4 5
$str5 C
]C D
}D E
$strE F
"F G
;G H
services 
.   	
AddAuthentication  	 
(   
JwtBearerDefaults   ,
.  , - 
AuthenticationScheme  - A
)  A B
.!! 	
AddJwtBearer!!	 
(!! 
options!! 
=>!!  
{"" 	
options## 
.## 
	Authority## 
=## 
domain##  &
;##& '
options$$ 
.$$ 
Audience$$ 
=$$ 
builder$$ &
.$$& '
Configuration$$' 4
[$$4 5
$str$$5 E
]$$E F
;$$F G
options&& 
.&& %
TokenValidationParameters&& -
=&&. /
new&&0 3%
TokenValidationParameters&&4 M
{'' 
NameClaimType(( 
=(( 

ClaimTypes((  *
.((* +
NameIdentifier((+ 9
})) 
;)) 
}** 	
)**	 

;**
 
services,, 
.,, 
AddControllers,, 
(,, 
),, 
;,, 
services-- 
.-- 
	AddOcelot-- 
(-- 
)-- 
;-- 
services.. 
... 
AddCors.. 
(.. 
options.. 
=>.. 
options// 
.// 
	AddPolicy// 
(// 
$str// &
,//& '
b//( )
=>//* ,
b00 
.00 
AllowAnyOrigin00 
(00 
)00 
.00 
AllowAnyMethod00 -
(00- .
)00. /
.00/ 0
AllowAnyHeader000 >
(00> ?
)00? @
)00@ A
)00A B
;00B C
}11 